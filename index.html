<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Máy Tính Tỉ Số Nén Động Cơ</title>
  
  <!-- Material Components for Web -->
  <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
      padding: 16px;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      color: rgba(0, 0, 0, 0.87);
      min-height: 100vh;
    }
    
    .calculator-container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .mdc-card {
      margin-bottom: 16px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      border-radius: 12px;
      overflow: hidden;
    }
    
    .card-header {
      padding: 16px;
      background-color: var(--mdc-theme-primary);
      color: var(--mdc-theme-on-primary);
    }
    
    .card-header.primary {
      background: linear-gradient(135deg, #a8e6cf 0%, #88d8a3 100%);
      color: #2d5a3d;
    }
    
    .card-header.secondary {
      background: linear-gradient(135deg, #ffd3a5 0%, #fd9853 100%);
      color: #8b4513;
    }
    
    .card-header.accent {
      background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
      color: #4a5568;
    }
    
    .card-header h5 {
      margin: 0;
      font-size: 1.25rem;
      font-weight: 500;
    }
    
    .card-content {
      padding: 16px;
    }
    
    .result-box {
      background: linear-gradient(135deg, #fff5f5 0%, #ffe8e8 100%);
      padding: 16px;
      border-radius: 8px;
      margin-top: 16px;
      border-left: 4px solid #ffb3ba;
      box-shadow: 0 2px 10px rgba(255, 179, 186, 0.2);
    }
    
    .formula-display {
      font-family: 'Roboto Mono', monospace;
      background: linear-gradient(135deg, #f0fff4 0%, #e6ffe6 100%);
      padding: 12px;
      border-radius: 8px;
      margin-top: 8px;
      border: 1px solid #bae1ff;
      box-shadow: 0 2px 8px rgba(186, 225, 255, 0.3);
    }
    
    .mdc-text-field {
      width: 100%;
      margin-bottom: 15px;
    }
    
    .helper-text {
      margin-bottom: 16px;
      margin-top: 4px;
    }
    
    .debug-info {
      background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
      padding: 12px;
      border-radius: 8px;
      margin-top: 8px;
      border: 1px solid #ffd54f;
      box-shadow: 0 2px 8px rgba(255, 213, 79, 0.2);
    }
    
    .calculation-steps {
      background: linear-gradient(135deg, #e8f4fd 0%, #bbdefb 100%);
      padding: 12px;
      border-radius: 8px;
      margin-top: 8px;
      border: 1px solid #90caf9;
      box-shadow: 0 2px 8px rgba(144, 202, 249, 0.2);
    }
    
    .calculation-steps ol {
      margin: 0;
      padding-left: 20px;
    }
    
    .calculation-steps li {
      margin-bottom: 4px;
    }
    
    .grid-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 16px;
      margin-bottom: 16px;
    }
    
    .full-width-card {
      grid-column: 1 / -1;
    }
    
    .values-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 16px;
    }
    
    .mdc-button {
      margin-top: 8px;
    }
    
    .small-text {
      font-size: 0.875rem;
      color: rgba(0, 0, 0, 0.6);
    }
    
    .result-title {
      font-size: 1.25rem;
      font-weight: 500;
      color: #6b73ff;
      margin-bottom: 8px;
      text-shadow: 0 1px 3px rgba(107, 115, 255, 0.3);
    }
    
    .app-title {
      text-align: center;
      margin-bottom: 24px;
      color: #667eea;
      font-weight: 400;
      text-shadow: 0 2px 4px rgba(102, 126, 234, 0.3);
      font-size: 2rem;
    }
  </style>
</head>
<body>
  <div id="app" class="calculator-container">
    <h1 class="app-title">Máy Tính Tỉ Số Nén Động Cơ</h1>
    
    <div class="grid-container">
      <div class="mdc-card">
        <div class="card-header primary">
          <h5>Tỉ Số Nén Tĩnh</h5>
        </div>
        <div class="card-content">
          <div class="mdc-text-field mdc-text-field--outlined">
            <input type="number" id="bore" v-model="bore" class="mdc-text-field__input" step="0.1" min="0">
            <div class="mdc-notched-outline">
              <div class="mdc-notched-outline__leading"></div>
              <div class="mdc-notched-outline__notch">
                <label for="bore" class="mdc-floating-label">Đường kính xilanh (b) (mm)</label>
              </div>
              <div class="mdc-notched-outline__trailing"></div>
            </div>
          </div>

          <div class="mdc-text-field mdc-text-field--outlined">
            <input type="number" id="stroke" v-model="stroke" class="mdc-text-field__input" step="0.1" min="0">
            <div class="mdc-notched-outline">
              <div class="mdc-notched-outline__leading"></div>
              <div class="mdc-notched-outline__notch">
                <label for="stroke" class="mdc-floating-label">Hành trình piston (s) (mm)</label>
              </div>
              <div class="mdc-notched-outline__trailing"></div>
            </div>
          </div>

          <div class="mdc-text-field mdc-text-field--outlined">
            <input type="number" id="gasketThickness" v-model="gasketThickness" class="mdc-text-field__input" step="0.01" min="0">
            <div class="mdc-notched-outline">
              <div class="mdc-notched-outline__leading"></div>
              <div class="mdc-notched-outline__notch">
                <label for="gasketThickness" class="mdc-floating-label">Độ dày gioăng nắp máy (mm)</label>
              </div>
              <div class="mdc-notched-outline__trailing"></div>
            </div>
          </div>

          <div class="mdc-text-field mdc-text-field--outlined">
            <input type="number" id="gasketBoreDiameter" v-model="gasketBoreDiameter" class="mdc-text-field__input" step="0.1" min="0">
            <div class="mdc-notched-outline">
              <div class="mdc-notched-outline__leading"></div>
              <div class="mdc-notched-outline__notch">
                <label for="gasketBoreDiameter" class="mdc-floating-label">Đường kính ron (g) (mm)</label>
              </div>
              <div class="mdc-notched-outline__trailing"></div>
            </div>
          </div>

          <div class="mdc-text-field mdc-text-field--outlined">
            <input type="number" id="deckHeight" v-model="deckHeight" class="mdc-text-field__input" step="0.1" min="0">
            <div class="mdc-notched-outline">
              <div class="mdc-notched-outline__leading"></div>
              <div class="mdc-notched-outline__notch">
                <label for="deckHeight" class="mdc-floating-label">Khoảng hở nắp máy (c) (mm)</label>
              </div>
              <div class="mdc-notched-outline__trailing"></div>
            </div>
          </div>

          <div class="mdc-text-field mdc-text-field--outlined">
            <input type="number" id="clearanceVolume" v-model="clearanceVolume" class="mdc-text-field__input" step="0.1" min="0">
            <div class="mdc-notched-outline">
              <div class="mdc-notched-outline__leading"></div>
              <div class="mdc-notched-outline__notch">
                <label for="clearanceVolume" class="mdc-floating-label">Thể tích buồng cháy (cc)</label>
              </div>
              <div class="mdc-notched-outline__trailing"></div>
            </div>
          </div>

          <div class="mdc-text-field mdc-text-field--outlined">
            <input type="number" id="pistonDomeVolume" v-model="pistonDomeVolume" class="mdc-text-field__input" step="0.1">
            <div class="mdc-notched-outline">
              <div class="mdc-notched-outline__leading"></div>
              <div class="mdc-notched-outline__notch">
                <label for="pistonDomeVolume" class="mdc-floating-label">Thể tích piston (cc)</label>
              </div>
              <div class="mdc-notched-outline__trailing"></div>
            </div>
          </div>
          <div class="small-text helper-text">Âm nếu đỉnh lồi, dương nếu đỉnh lõm</div>
          
          <div class="result-box">
            <div class="result-title">Tỉ Số Nén Tĩnh: {{ staticCompressionRatio ? staticCompressionRatio.toFixed(2) : '0.00' }}:1</div>
            <div class="formula-display">
              TSN = (Thể tích quét + Thể tích buồng cháy) / Thể tích buồng cháy
            </div>
            <div class="small-text" style="margin-top: 8px;">Thể tích quét: {{ sweptVolume ? sweptVolume.toFixed(2) : '0.00' }} cc</div>
            <div class="small-text">Thể tích buồng cháy: {{ effectiveClearanceVolume ? effectiveClearanceVolume.toFixed(2) : '0.00' }} cc</div>
          </div>
        </div>
      </div>
      
      <div class="mdc-card">
        <div class="card-header secondary">
          <h5>Tỉ Số Nén Động</h5>
        </div>
        <div class="card-content">
          <div class="mdc-text-field mdc-text-field--outlined">
            <input type="number" id="intakeClosingPoint" v-model="manualIntakeClosingPoint" class="mdc-text-field__input" step="1" min="0" max="90">
            <div class="mdc-notched-outline">
              <div class="mdc-notched-outline__leading"></div>
              <div class="mdc-notched-outline__notch">
                <label for="intakeClosingPoint" class="mdc-floating-label">Điểm đóng xupap nạp (độ sau ĐCD)</label>
              </div>
              <div class="mdc-notched-outline__trailing"></div>
            </div>
          </div>
          <div class="small-text helper-text">Giá trị từ 0 đến 90 độ sau ĐCD</div>

          <div class="mdc-text-field mdc-text-field--outlined">
            <input type="number" id="connectingRodLength" v-model="connectingRodLength" class="mdc-text-field__input" step="0.1" min="0">
            <div class="mdc-notched-outline">
              <div class="mdc-notched-outline__leading"></div>
              <div class="mdc-notched-outline__notch">
                <label for="connectingRodLength" class="mdc-floating-label">Chiều dài tay dên (mm)</label>
              </div>
              <div class="mdc-notched-outline__trailing"></div>
            </div>
          </div>

          <div class="mdc-text-field mdc-text-field--outlined" :class="{ 'mdc-text-field--disabled': autoCalculateAdjustedStroke }">
            <input type="number" id="adjustedStroke" v-model="adjustedStroke" class="mdc-text-field__input" step="0.1" min="0" :disabled="autoCalculateAdjustedStroke">
            <div class="mdc-notched-outline">
              <div class="mdc-notched-outline__leading"></div>
              <div class="mdc-notched-outline__notch">
                <label for="adjustedStroke" class="mdc-floating-label">Hành trình hiệu dụng (mm)</label>
              </div>
              <div class="mdc-notched-outline__trailing"></div>
            </div>
          </div>

          <div class="mdc-form-field">
            <div class="mdc-checkbox">
              <input type="checkbox" class="mdc-checkbox__native-control" id="autoCalculateStroke" v-model="autoCalculateAdjustedStroke" checked>
              <div class="mdc-checkbox__background">
                <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
                  <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"/>
                </svg>
                <div class="mdc-checkbox__mixedmark"></div>
              </div>
              <div class="mdc-checkbox__ripple"></div>
            </div>
            <label for="autoCalculateStroke">Tự động tính từ điểm đóng xupap nạp</label>
          </div>
          <div class="small-text helper-text">Khoảng cách từ piston đến ĐCT tại thời điểm đóng xupap nạp</div>
          
          <div class="result-box">
            <div class="result-title">Tỉ Số Nén Động: {{ dynamicCompressionRatio ? dynamicCompressionRatio.toFixed(2) : '0.00' }}:1</div>
            <div class="formula-display">
              TSND = (Thể tích quét hiệu dụng + Thể tích buồng cháy) / Thể tích buồng cháy
            </div>
            
            <div class="calculation-steps">
              <h6 style="margin: 0 0 8px 0; font-weight: 500;">Thứ tự tính toán:</h6>
              <ol>
                <li class="small-text">Điểm đóng xupap nạp: {{ intakeClosingPoint }} độ sau ĐCD</li>
                <li class="small-text">Vị trí piston tại điểm đóng: {{ pistonPositionAtIntakeClosing ? pistonPositionAtIntakeClosing.toFixed(2) : '0.00' }} mm từ ĐCT</li>
                <li class="small-text">Hành trình hiệu dụng = Vị trí piston tại điểm đóng: {{ adjustedStroke ? adjustedStroke.toFixed(2) : '0.00' }} mm</li>
                <li class="small-text">Thể tích quét hiệu dụng: {{ effectiveVolume ? effectiveVolume.toFixed(2) : '0.00' }} cc</li>
                <li class="small-text">Tỉ số nén động: {{ dynamicCompressionRatio ? dynamicCompressionRatio.toFixed(2) : '0.00' }}:1</li>
              </ol>
            </div>
            
            <div class="small-text" style="margin-top: 8px;">Thể tích buồng cháy: {{ effectiveClearanceVolume ? effectiveClearanceVolume.toFixed(2) : '0.00' }} cc</div>
            
            <button class="mdc-button mdc-button--outlined" @click="showDebugInfo = !showDebugInfo">
              <span class="mdc-button__ripple"></span>
              <span class="mdc-button__label">{{ showDebugInfo ? 'Ẩn' : 'Hiện' }} thông tin chi tiết</span>
            </button>
            
            <div v-if="showDebugInfo" class="debug-info">
              <div class="small-text">Thể tích buồng cháy gốc: {{ clearanceVolume }} cc</div>
              <div class="small-text">Thể tích ron: {{ gasketVolume ? gasketVolume.toFixed(2) : '0.00' }} cc</div>
              <div class="small-text">Thể tích khoảng hở nắp máy: {{ deckVolume ? deckVolume.toFixed(2) : '0.00' }} cc</div>
              <div class="small-text">Thể tích piston: {{ pistonDomeVolume }} cc ({{ pistonDomeVolume > 0 ? 'lõm' : 'lồi' }})</div>
              <div class="small-text">Chiều dài tay dên: {{ connectingRodLength }} mm</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="mdc-card full-width-card">
      <div class="card-header accent">
        <h5>Các Giá Trị Tính Toán</h5>
      </div>
      <div class="card-content">
        <div class="values-grid">
          <div>
            <div style="font-weight: 500; margin-bottom: 4px;">Thể tích quét:</div>
            <div class="small-text">{{ sweptVolume ? sweptVolume.toFixed(2) : '0.00' }} cc</div>
          </div>
          <div>
            <div style="font-weight: 500; margin-bottom: 4px;">Tổng thể tích xilanh:</div>
            <div class="small-text">{{ totalCylinderVolume ? totalCylinderVolume.toFixed(2) : '0.00' }} cc</div>
          </div>
          <div>
            <div style="font-weight: 500; margin-bottom: 4px;">Thể tích ron:</div>
            <div class="small-text">{{ gasketVolume ? gasketVolume.toFixed(2) : '0.00' }} cc</div>
          </div>
          <div>
            <div style="font-weight: 500; margin-bottom: 4px;">Thể tích khoảng hở nắp máy:</div>
            <div class="small-text">{{ deckVolume ? deckVolume.toFixed(2) : '0.00' }} cc</div>
          </div>
          <div>
            <div style="font-weight: 500; margin-bottom: 4px;">Thể tích buồng cháy hiệu dụng:</div>
            <div class="small-text">{{ effectiveClearanceVolume ? effectiveClearanceVolume.toFixed(2) : '0.00' }} cc</div>
          </div>
          <div>
            <div style="font-weight: 500; margin-bottom: 4px;">Điểm đóng xupap nạp:</div>
            <div class="small-text">{{ intakeClosingPoint ? intakeClosingPoint.toFixed(1) : '0.0' }}° sau ĐCD</div>
          </div>
        </div>
      </div>
    </div>
    
<!--    <div class="mt-4">-->
<!--      <h5>Về Tính Toán Tỉ Số Nén Động Cơ</h5>-->
<!--      <p>Công cụ này giúp xác định cả tỉ số nén tĩnh và tỉ số nén động cho động cơ một xilanh. Tỉ số nén tĩnh là tỷ lệ giữa thể tích xilanh tối đa và thể tích xilanh tối thiểu, trong khi tỉ số nén động tính đến điểm đóng thực tế của xupap nạp.</p>-->
<!--      <p>Đối với động cơ hiệu suất cao, tỉ số nén động thường là thông số hữu ích hơn vì nó thể hiện chính xác hơn mức độ nén thực tế mà hỗn hợp không khí-nhiên liệu trải qua trong quá trình vận hành động cơ.</p>-->
<!--    </div>-->
  </div>

  <script>
    const { createApp, ref, computed, watch, onMounted } = Vue;
    
    createApp({
      setup() {
        // Input values with default values for Yamaha Exciter 150cc
        const bore = ref(57);  // mm - Đường kính xilanh Exciter 150cc
        const stroke = ref(58.7);  // mm - Hành trình piston Exciter 150cc
        const clearanceVolume = ref(10.1);  // cc - Ước tính thể tích buồng cháy dựa trên tỉ số nén 10.4:1
        const deckHeight = ref(0.8);  // mm - Khoảng hở nắp máy
        const gasketThickness = ref(0.3);  // mm - Ước tính độ dày gioăng nắp máy
        const gasketBoreDiameter = ref(58);  // mm - Ước tính đường kính ron
        const pistonDomeVolume = ref(3);  // cc - Thể tích đỉnh piston lõm đo được
        const showDebugInfo = ref(false);  // Hiển thị thông tin debug
        const connectingRodLength = ref(100);  // mm - Ước tính chiều dài tay dên
        const adjustedStroke = ref(40);  // mm - Hành trình hiệu dụng từ điểm đóng xupap nạp đến ĐCT
        const manualIntakeClosingPoint = ref(75);  // degrees ABDC - Điểm đóng xupap nạp (mặc định 75 độ sau ĐCD)
        const autoCalculateAdjustedStroke = ref(true);  // Tự động tính hành trình hiệu dụng từ điểm đóng xupap nạp
        
        // Calculated values
        const sweptVolume = computed(() => {
          // Thể tích quét cho một xilanh
          return Math.PI * Math.pow(bore.value / 2, 2) * stroke.value / 1000;
        });
        
        const gasketVolume = computed(() => {
          // Thể tích gioăng
          return Math.PI * Math.pow(gasketBoreDiameter.value / 2, 2) * gasketThickness.value / 1000;
        });
        
        const deckVolume = computed(() => {
          if (deckHeight.value <= 0) return 0;
          // Thể tích khoảng hở nắp máy
          return Math.PI * Math.pow(bore.value / 2, 2) * deckHeight.value / 1000;
        });
        
        const effectiveClearanceVolume = computed(() => {
          // Thể tích buồng cháy hiệu dụng
          // Lưu ý: Đã đảo ngược dấu của pistonDomeVolume - cộng thay vì trừ
          // vì giờ đây âm là đỉnh lồi (giảm thể tích), dương là đỉnh lõm (tăng thể tích)
          return clearanceVolume.value + gasketVolume.value + deckVolume.value + pistonDomeVolume.value;
        });
        
        const totalCylinderVolume = computed(() => {
          return sweptVolume.value + effectiveClearanceVolume.value;
        });
        
        const staticCompressionRatio = computed(() => {
          if (effectiveClearanceVolume.value <= 0) return 0;
          return totalCylinderVolume.value / effectiveClearanceVolume.value;
        });
        
        // Sử dụng điểm đóng xupap nạp được nhập trực tiếp
        const intakeClosingPoint = computed(() => {
          // Trả về giá trị được nhập trực tiếp
          return manualIntakeClosingPoint.value;
        });
        
        // Calculate piston position at intake closing
        const pistonPositionAtIntakeClosing = computed(() => {
          // Góc sau ĐCD (đã được nhập trực tiếp)
          // Cần chuyển đổi từ góc sau ĐCD sang góc từ ĐCT
          // ĐCD = 180 độ từ ĐCT, nên góc từ ĐCT = 180 + góc sau ĐCD
          const angleFromTDC = 180 + intakeClosingPoint.value;
          const angleRad = angleFromTDC * Math.PI / 180;
          const crankOffset = stroke.value / 2;
          
          // Sử dụng công thức slider-crank chính xác để tính vị trí piston
          // Công thức: s = r * (1 - cos(θ)) + (l/r) * (1 - sqrt(1 - (r/l)^2 * sin^2(θ)))
          // Trong đó:
          // r = bán kính trục khuỷu (= stroke/2)
          // l = chiều dài thanh truyền
          // θ = góc quay từ ĐCT
          
          const r = crankOffset;
          const l = connectingRodLength.value;
          const theta = angleRad;
          
          // Phần 1: r * (1 - cos(θ))
          const term1 = r * (1 - Math.cos(theta));
          
          // Phần 2: (l/r) * (1 - sqrt(1 - (r/l)^2 * sin^2(θ)))
          const ratio = r / l;
          const sinTerm = Math.pow(ratio * Math.sin(theta), 2);
          const term2 = l * (1 - Math.sqrt(1 - sinTerm));
          
          // Vị trí piston từ ĐCT
          const positionFromTDC = term1 + term2;
          
          // Log để debug
          console.log('Góc từ ĐCT:', angleFromTDC, 'độ');
          console.log('Góc từ ĐCD:', intakeClosingPoint.value, 'độ');
          console.log('Chiều dài tay dên:', l, 'mm');
          console.log('Vị trí piston từ ĐCT:', positionFromTDC.toFixed(2), 'mm');
          
          return positionFromTDC;
        });
        
        // Watch for changes in intake closing point and update adjusted stroke if auto-calculate is enabled
        watch([intakeClosingPoint, pistonPositionAtIntakeClosing], () => {
          if (autoCalculateAdjustedStroke.value) {
            // Calculate adjusted stroke based on piston position at intake closing
            // Hành trình hiệu dụng = Vị trí piston tại điểm đóng (không phải hành trình tổng - vị trí)
            const newAdjustedStroke = pistonPositionAtIntakeClosing.value;
            adjustedStroke.value = newAdjustedStroke;
            
            // Log để debug
            console.log('Hành trình tổng:', stroke.value, 'mm');
            console.log('Vị trí piston tại điểm đóng:', pistonPositionAtIntakeClosing.value.toFixed(2), 'mm');
            console.log('Hành trình hiệu dụng:', newAdjustedStroke.toFixed(2), 'mm');
          }
        });
        
        
        // Calculate effective volume per cylinder
        const effectiveVolume = computed(() => {
          return Math.PI * Math.pow(bore.value / 2, 2) * adjustedStroke.value / 1000;
        });
        
        // Calculate dynamic compression ratio using adjusted stroke
        const dynamicCompressionRatio = computed(() => {
          const effectiveDisplacement = effectiveVolume.value;
          const clearanceVol = effectiveClearanceVolume.value;
          
          if (clearanceVol <= 0) return 0;
          
          // Công thức tỉ số nén động: (Thể tích quét hiệu dụng + Thể tích buồng cháy) / Thể tích buồng cháy
          const ratio = (effectiveDisplacement + clearanceVol) / clearanceVol;
          
          // Log để debug
          console.log('Thể tích quét hiệu dụng:', effectiveDisplacement.toFixed(2), 'cc');
          console.log('Thể tích buồng cháy:', clearanceVol.toFixed(2), 'cc');
          console.log('Tỉ số nén động:', ratio.toFixed(2), ':1');
          
          return ratio;
        });
        
        // Initialize Material Design components after Vue is mounted
        onMounted(() => {
          if (autoCalculateAdjustedStroke.value) {
            // Calculate initial adjusted stroke based on piston position at intake closing
            const initialAdjustedStroke = pistonPositionAtIntakeClosing.value;
            adjustedStroke.value = initialAdjustedStroke;
            
            // Log để debug
            console.log('Khởi tạo - Hành trình tổng:', stroke.value, 'mm');
            console.log('Khởi tạo - Vị trí piston tại điểm đóng:', pistonPositionAtIntakeClosing.value.toFixed(2), 'mm');
            console.log('Khởi tạo - Hành trình hiệu dụng:', initialAdjustedStroke.toFixed(2), 'mm');
          }
          
          // Initialize Material Design Components
          setTimeout(() => {
            // Initialize text fields
            const textFields = document.querySelectorAll('.mdc-text-field');
            textFields.forEach(textField => {
              mdc.textField.MDCTextField.attachTo(textField);
            });
            
            // Initialize buttons
            const buttons = document.querySelectorAll('.mdc-button');
            buttons.forEach(button => {
              mdc.ripple.MDCRipple.attachTo(button);
            });
            
            // Initialize checkboxes
            const checkboxes = document.querySelectorAll('.mdc-checkbox');
            checkboxes.forEach(checkbox => {
              mdc.checkbox.MDCCheckbox.attachTo(checkbox);
            });
            
            // Initialize form fields
            const formFields = document.querySelectorAll('.mdc-form-field');
            formFields.forEach(formField => {
              mdc.formField.MDCFormField.attachTo(formField);
            });
          }, 100);
        });

        return {
          // Input values
          bore,
          stroke,
          clearanceVolume,
          deckHeight,
          gasketThickness,
          gasketBoreDiameter,
          pistonDomeVolume,
          connectingRodLength,
          adjustedStroke,
          manualIntakeClosingPoint,
          autoCalculateAdjustedStroke,
          showDebugInfo,
          
          // Calculated values
          sweptVolume,
          gasketVolume,
          deckVolume,
          effectiveClearanceVolume,
          totalCylinderVolume,
          staticCompressionRatio,
          intakeClosingPoint,
          pistonPositionAtIntakeClosing,
          effectiveVolume,
          dynamicCompressionRatio
        };
      }
    }).mount('#app');
  </script>
</body>
</html>